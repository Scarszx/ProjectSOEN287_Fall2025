<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPORTS FACILITIES BOOK</title>
    <link rel="stylesheet" href="../css/Sports_Facilities_booking.css">
    <link rel="stylesheet" href="../css/stylesLOGIN.css">

    <link rel="icon" type="image/png" sizes="32x32" href="../css/icons/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../css/icons/favicon_io/favicon-16x16.png">

</head>
<body>
    <!-- header -->
    <div id="header-container"></div>

    <div class="booking-container">
    <button><a href="page1.html">Back to Home</a></button>
        <h1>Sports_Facilities Booking</h1>
        <form id="Sports_Facilities_SelectionForm">
            <input type="text" id="Sports_Facilities_Number" name="Sports_Facilities_Number" placeholder="Enter Sports Facilities Number for Current Schedule">
            <button type="submit" class="btn btn-primary">Search Sports Facilities</button>
        </form>
          <div id="calendar-controls">
          <button id="prev-week">Previous Week</button>
          <input type="date" id="week-picker" />
          <button id="next-week">Next Week</button>
        </div>

        <table id="weekly-calendar" border="1">
          <thead>
            <tr id="week-days-header">
              <th>Time</th>
            </tr>
          </thead>
          <tbody id="time-slots-body"></tbody>
        </table>

        <script>
          // Get start date of the week for given date
          function getStartOfWeek(date) {
            const day = date.getDay();
            const diff = date.getDate() - day;
            return new Date(date.setDate(diff));
          }

          let currentWeekStart = getStartOfWeek(new Date());

          function updateCalendar(weekStart) {
            const headerRow = document.getElementById('week-days-header');
            const tbody = document.getElementById('time-slots-body');

            headerRow.innerHTML = '<th>Time</th>';
            tbody.innerHTML = '';

            // Create headers for days of week
            for (let i = 0; i < 7; i++) {
              let d = new Date(weekStart);
              d.setDate(weekStart.getDate() + i);

              let dayStr = d.toLocaleDateString(undefined, {
                weekday: 'short',
                month: 'short',
                day: 'numeric'
              });

              let th = document.createElement('th');
              th.textContent = dayStr;
              headerRow.appendChild(th);
            }

            // Create rows for each hour 8 to 18 with time label column
            for (let hour = 8; hour <= 18; hour++) {
              let tr = document.createElement('tr');

              let timeTd = document.createElement('td');
              timeTd.textContent = `${hour}:00`;
              tr.appendChild(timeTd);

              for (let i = 0; i < 7; i++) {
                let d = new Date(weekStart);
                d.setDate(weekStart.getDate() + i);

                let cell = document.createElement('td');
                cell.id = `cell-${d.toISOString().split('T')[0]}-${hour}`;
                cell.textContent = 'Loading...'; // Placeholder
                tr.appendChild(cell);
              }

              tbody.appendChild(tr);
            }
          }

          // Initialize calendar
          updateCalendar(new Date(currentWeekStart));

          document.getElementById('prev-week').addEventListener('click', () => {
            currentWeekStart.setDate(currentWeekStart.getDate() - 7);
            updateCalendar(new Date(currentWeekStart));
          });

          document.getElementById('next-week').addEventListener('click', () => {
            currentWeekStart.setDate(currentWeekStart.getDate() + 7);
            updateCalendar(new Date(currentWeekStart));
          });

          document.getElementById('week-picker').addEventListener('change', (e) => {
            const selectedDate = new Date(e.target.value);
            currentWeekStart = getStartOfWeek(selectedDate);
            updateCalendar(new Date(currentWeekStart));
          });
        </script>

        <form id="bookingForm">
            <div class="form-group">
                <label for="resource_id">Resource id: </label>
                <input type="text" id="resource_id" name="resource_id" required>
                <label for="date">Select Date(Year, Month, Day):</label>
                <input type="date" id="date" name="date" required>
                <label for="time">Select Time:</label>
                <label for="start_time">From:</label>
                <select id="start_time" name="start_time" required>
                    <option value="" disabled selected>Select a time</option>
                    <option value="08:00">08:00</option>
                    <option value="09:00">09:00</option>
                    <option value="10:00">10:00</option>
                    <option value="11:00">11:00</option>
                    <option value="12:00">12:00</option>
                    <option value="13:00">13:00</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                    <option value="18:00">18:00</option>
                </select>
                <label for="end_time">To:</label>
                <select id="end_time" name="end_time" required>
                    <option value="" disabled selected>Select a time</option>
                    <option value="09:00">09:00</option>
                    <option value="10:00">10:00</option>
                    <option value="11:00">11:00</option>
                    <option value="12:00">12:00</option>
                    <option value="13:00">13:00</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                    <option value="18:00">18:00</option>
                    <option value="19:00">19:00</option>
                </select>
                <label for="equipment">Equipment Needed:</label>
                <div class="checkbox-row">
                    <label class="inline-label"><input type="checkbox" id="Basketballs" name="equipment" value="Basketballs">Basketballs</label>
                    <label class="inline-label"><input type="checkbox" id="Volleyballs" name="equipment" value="Volleyballs">Volleyballs</label>
                    <label class="inline-label"><input type="checkbox" id="Badminton rackets" name="equipment" value="Badminton rackets">Badminton rackets</label>
                    <label class="inline-label"><input type="checkbox" id="shuttlecocks" name="equipment" value="shuttlecocks">shuttlecocks</label>
                    <label class="inline-label"><input type="checkbox" id="Tennis rackets" name="equipment" value="Tennis rackets">Tennis rackets</label>
                    <label class="inline-label"><input type="checkbox" id="Tennis balls" name="equipment" value="Tennis balls">Tennis balls</label>
                    <label class="inline-label"><input type="checkbox" id="Soccer balls" name="equipment" value="Soccer balls">Soccer balls</label>
                    <label class="inline-label"><input type="checkbox" id="Table tennis paddles" name="equipment" value="Table tennis paddles">Table tennis paddles</label>
                    <label class="inline-label"><input type="checkbox" id="Table tennis balls" name="equipment" value="Table tennis balls">Table tennis balls</label>
                    <label class="inline-label"><input type="checkbox" id="Baseball bats and gloves" name="equipment" value="Baseball bats and gloves">Baseball bats and gloves</label>
                    <label class="inline-label"><input type="checkbox" id="Cones and training markers" name="equipment" value="Cones and training markers">Cones and training markers</label>
                    <label class="inline-label"><input type="checkbox" id="Jump ropes" name="equipment" value="Jump ropes">Jump ropes</label>
                    <label class="inline-label"><input type="checkbox" id="Resistance bands" name="equipment" value="Resistance bands">Resistance bands</label>
                    <label class="inline-label"><input type="checkbox" id="Yoga mats" name="equipment" value="Yoga mats">Yoga mats</label>
                    <label class="inline-label"><input type="checkbox" id="Dumbbells" name="Dumbbells" value="Dumbbells">Dumbbells</label>
                    <label class="inline-label"><input type="checkbox" id="kettlebells" name="kettlebells" value="kettlebells">kettlebells</label>
                </div>
                <label for="quanity set up">*The equiemnt selected will only provide a set, please inform in 'Other Equipment' if you need more</label>
                <label for="additional_equipment">Other Equipment (please specify):</label>
                <textarea id="additional_equipment" name="additional_equipment"></textarea>
                <label for="purpose">Purpose of Booking:</label>
                <textarea id="purpose" name="purpose"></textarea>
                <button type="submit" class="btn btn-primary">Book Sports Facilities</button>
            </div>
        </form>
    </div>

    <!-- Script to load header dynamically -->
  <script>
    fetch("header.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("header-container").innerHTML = html;
      })
      .then(() => {
        // Optional: dynamically set user info (simulate logged-in user)
        const user = { name: "John Doe", role: "Student" };
        document.getElementById("username").textContent = user.name;
        document.getElementById("userRole").textContent = user.role;
      })
      .catch(err => console.error("Error loading header:", err));
  </script>
</body>

</html>




